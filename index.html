<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Touchr: polyfill which mimics touch events in Internet Explorer 10+</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="./javascripts/touchr.js"></script>
    <link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
    <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Touchr</h1>
        <p>Mimics touch and gesture events for Internet Explorer 10+ browser</p>

        <p class="view"><a href="https://github.com/aichi/Touchr">View the Project on GitHub <small>aichi/Touchr</small></a></p>


        <ul>
          <li><a href="https://github.com/aichi/Touchr/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/aichi/Touchr/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/aichi/Touchr">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>Touchr</h1>

        <p>The core idea of Touchr is that many mobile web sites are prepared for touchable devices but are incompatible
            with new Internet Explorer 10+ pointer gestures. This package automatically mimics touch and gesture events
            in IE 10+ browser.</p>

        <h2>Usage:</h2>

        <p><code>&lt;script type="text/javascript" src="js/touchr.js"&gt;&lt;/script&gt;</code></p>

        <h2>Interaction:</h2>

        <p><code>element.addEventListener("touchstart", function(e){console.log(e)});</code></p>

        <h2>Fine tuning:</h2>

        <p>Touchr by default convert to touch events only pointer events with
            <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh466130.aspx">touch</a> type. That behavior
            can be overwritten setting bitmask property <em>window.Touchr_ALLOWED_POINTER_TYPE</em> before
            script tag which loads touchr.js. Available values are:</p>
        <ul>
            <li>1: touch (default setting)</li>
            <li>2: mouse</li>
            <li>4: pen</li>
        </ul>

        <h2>Licence:</h2>

        <p>Touchr is distributed under terms of MIT licence.</p>

        <h2>Demo:</h2>

        <p>Try to draw on canvas bellow with finger in touchable browser or IE 10+.</p>
        <canvas id="canvas" style="width: 500px; height: 500px; border: 1px solid lightgray; xdisplay: none;"></canvas>
        <script>
            function viewportOffset(forElement) {
            	var value = forElement.getBoundingClientRect();
            	return {left: value.left, top: value.top};
            }

            var obj = document.getElementById('canvas'),
                ctx = obj.getContext("2d"),
                touched = false;
            obj.width = obj.height = 500;
            ctx.fillStyle = "#FF0000";

            obj.addEventListener("touchstart", function(event){
                var touch = event.touches[0];
                if (touch) {
                    touched = true;
                }
            });

            obj.addEventListener('touchmove', function(event) {
                var touch = event.touches[0];
                var offset = viewportOffset(obj);
                if (touched) {
                    var x = touch.clientX - offset.left,
                        y = touch.clientY - offset.top;
                    ctx.fillRect(x - 1, y - 1, 2, 2);
                }
            });

            obj.addEventListener('touchend', function(event) {
                touched = false;
            });
        </script>

          <h2>Sample code:</h2>

          <pre><code>
&lt;canvas id="canvas"
    style="width: 500px; height: 500px; border: 1px solid gray;">
&lt;/canvas>
&lt;script>
  function viewportOffset(forElement) {
    var value = forElement.getBoundingClientRect();
    return {left: value.left, top: value.top};
  }

  var obj = document.getElementById('canvas'),
      ctx = obj.getContext("2d"),
      touched = false;
  obj.width = obj.height = 500;
  ctx.fillStyle = "#FF0000";

  obj.addEventListener("touchstart", function(event){
      var touch = event.touches[0];
      if (touch) {
          touched = true;
      }
  });

  obj.addEventListener('touchmove', function(event) {
      var touch = event.touches[0];
      var offset = viewportOffset(obj);
      if (touched) {
          var x = touch.clientX - offset.left,
              y = touch.clientY - offset.top;
          ctx.fillRect(x - 1, y - 1, 2, 2);
      }
  });

  obj.addEventListener('touchend', function(event) {
      touched = false;
  });
&lt;/script>
          </code></pre>
          <script>hljs.initHighlightingOnLoad();</script>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/aichi">aichi</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-86831-11");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>